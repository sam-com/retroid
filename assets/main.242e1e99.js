var F=Object.defineProperty;var y=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var k=(e,n,r)=>n in e?F(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,l=(e,n)=>{for(var r in n||(n={}))W.call(n,r)&&k(e,r,n[r]);if(y)for(var r of y(n))j.call(n,r)&&k(e,r,n[r]);return e};import{I as m}from"./emulatorMessageHandler.6ea88bd0.js";import{j as t,a,T as E,S as A,C as w,R as H,A as G,b as v,B as x,H as M,c as U,d as q,e as _,P as $,f as K,W as V,g as J,F as Q,h as X,i as Y,k as Z,l as ee,m as te,u as ne,D as re,n as R,o as B,p as oe,q as ae,r as N,s as i,t as ce,v as ie,w as se,L as P,x as z,I as b,y as le,z as ue,E as de,G as me,J as fe,K as he,M as pe,N as p,O as ge,Q as ve,U as xe,V as be,X as ye,Y as ke}from"./vendor.fe3562ce.js";const we=!0;"serviceWorker"in navigator&&we&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/retroid/sw.js",{scope:"/retroid/"})});function f(e){return t("div",{className:e.direction==="vertical"?" mt-auto":"ml-auto"})}function g({icon:e,text:n}){return a(v,{className:"flex gap-1",color:"text.primary",sx:{userSelect:"none"},children:[t(e,{}),n]})}function Se(){return a(E,{children:[t(f,{direction:"horizontal"}),a(A,{spacing:3,direction:"row",children:[t(g,{icon:w,text:"Open"}),t(g,{icon:w,text:"Go Back"}),t(g,{icon:H,text:"Menu Bar"}),t(g,{icon:G,text:"Options"})]})]})}const Ie=e=>t(x,{className:"flex w-screen h-screen overflow-hidden",sx:{background:"linear-gradient(90deg, #1e3c65, #0f1e33)"},children:e.children}),Ce=e=>t("div",{className:"flex grow overflow-hidden",children:e.children}),Ee=e=>a("div",{className:"flex grow flex-col",children:[e.top,t(Ce,{children:e.center}),e.bottom]});function Ae(e){return a(Ie,{children:[e.left,t(Ee,{top:e.top,center:e.children,bottom:e.bottom})]})}var s=(e=>(e.home="/home",e.games="/games",e.consoles="/consoles",e.recent="/recent",e.favorites="/favorites",e.power="/power",e.settings="/settings",e))(s||{});const L=[{key:"home",icon:M,activeIcon:U,link:s.home},{key:"games",icon:q,activeIcon:_,link:s.games},{key:"consoles",icon:$,activeIcon:K,link:s.consoles},{key:"recent",icon:V,activeIcon:J,link:s.recent},{key:"favorites",icon:Q,activeIcon:X,link:s.favorites}],D=[{key:"power",icon:Y,activeIcon:Z,link:s.power},{key:"settings",icon:ee,activeIcon:te,link:s.settings}],Re=[...L,...D],S=Re.map(({key:e})=>e);function I({active:e,item:n,onClick:r}){const o=e?n.activeIcon:n.icon;return t(ae,{value:n.key,icon:t(o,{fontSize:"large"}),onClick:()=>r(n)},n.key)}const C=e=>S.find(n=>e.includes(n))||S[0];function Be(){const e=N(),[n,r]=i.exports.useState(C(e.pathname));return i.exports.useEffect(()=>{const o=C(e.pathname);r(o)},[e]),n}function Ne(){const e=ne(),n=Be(),r=o=>e(o.link);return t(re,{variant:"permanent",anchor:"left",sx:{width:"90px"},elevation:0,children:a(x,{className:"flex flex-col grow items-center pt-4 overflow-hidden",children:[t(R,{sx:{bgcolor:"primary.main"}}),t(B,{sx:{margin:"16px 0"}}),a(oe,{value:n,orientation:"vertical",variant:"scrollable","aria-label":"tabs",classes:{root:"grow",indicator:"left-0 bg-green-50",flexContainerVertical:"h-full"},children:[L.map(o=>I({active:n===o.key,item:o,onClick:r})),t(f,{direction:"vertical"}),D.map(o=>I({active:n===o.key,item:o,onClick:r}))]})]})})}var Pe="/retroid/assets/retroid_t.28b3dbb3.png";function ze(){const[e,n]=i.exports.useState(new Date);return i.exports.useEffect(()=>{setInterval(()=>n(new Date),3e4)},[]),a(A,{direction:"row",spacing:2,className:"flex items-center",children:[t(v,{variant:"h6",color:"text.primary",sx:{userSelect:"none"},children:e.toLocaleString("en-US",{hour:"numeric",minute:"numeric"})}),t(v,{variant:"h6",color:"text.primary",className:"flex items-center",children:t(ce,{})})]})}function Le({crumbs:e,index:n}){const r=(u,d)=>`${u}/${d}`,o=e[n],c=e.reduce(r,"");return t(P,{component:z,to:c,color:"inherit",underline:"hover",children:t(v,{variant:"h6",sx:{userSelect:"none"},children:o})})}function De(){const n=N().pathname.split("/").splice(1);return t(ie,{position:"relative",color:"transparent",elevation:0,children:a(E,{children:[a(se,{"aria-label":"breadcrumb",children:[t(P,{component:z,to:s.home,underline:"hover",color:"inherit",children:t(R,{variant:"square",src:Pe,sx:{width:56,height:48}})}),n.map((r,o)=>t(Le,{crumbs:n,index:o},r))]}),t(f,{direction:"horizontal"}),t("div",{className:"gap-1 flex items-center",children:t(ze,{})})]})})}function Oe(){return t(x,{children:t("p",{children:"Consoles Page"})})}function Te(){return t(x,{children:t("p",{children:"Games Page"})})}const O="emulator-container",Fe=()=>{var e;return document.fullscreenElement?document.exitFullscreen():(e=document.getElementById(O))==null?void 0:e.requestFullscreen()},We=({onStart:e,onPause:n,onResume:r})=>{const[o,c]=i.exports.useState(null);return t(b,{onClick:o!==null?()=>{o?n():r(),c(!o)}:()=>{e(),c(!0)},size:"small",color:"primary","aria-label":"Play",component:"span",children:t(o?de:me,{fontSize:"large"})})},je=({onRestart:e})=>t(b,{size:"small",color:"primary","aria-label":"fullscreen",component:"span",onClick:e,children:t(le,{fontSize:"large"})}),He=()=>{const[e,n]=i.exports.useState(!1);return i.exports.useEffect(()=>{const o="fullscreenchange",c=()=>n(!!document.fullscreenElement);return document.addEventListener(o,c),()=>document.removeEventListener(o,c)},[]),t(b,{onClick:Fe,size:"small",color:"primary","aria-label":"fullscreen",component:"span",children:t(e?fe:he,{fontSize:"large"})})},Ge=({onChangeAspect:e})=>t(b,{onClick:e,size:"small",color:"primary","aria-label":"Aspect Ration",component:"span",children:t(ue,{fontSize:"large"})}),Me=e=>t("div",{className:"absolute inset-0 flex flex-col rounded",children:e.children}),Ue=e=>a("div",{className:"bg-black bg-opacity-60 w-full flex p-2",children:[t(B,{}),t(We,l({},e)),t(je,l({},e)),t(f,{direction:"horizontal"}),t(Ge,l({},e)),t(He,{})]});function qe(e){return a(Me,{children:[t(f,{direction:"vertical"}),t(Ue,l({},e))]})}const _e=e=>{var n;return(n=e.current)==null?void 0:n.contentWindow};function $e(e,n){window.onmessage=function({data:r}){var o;r.type==="initialized"&&((o=_e(e))==null||o.postMessage(n,"*"))}}function Ke(e){const n={type:m.initialize,payload:{rom:e.rom,core:e.core}};i.exports.useEffect(()=>{$e(e.iframeRef,n)},[e.iframeRef])}function Ve(e){const n={type:m.start},r={type:m.pause},o={type:m.resume},c={type:m.restart},u={type:m.changeAspect};return{onStart:()=>e(n),onPause:()=>e(r),onResume:()=>e(o),onRestart:()=>e(c),onChangeAspect:()=>e(u)}}function Je(e){const n=i.exports.useRef(null),r=i.exports.useRef(null),o=u=>{var d,h;return(h=(d=n.current)==null?void 0:d.contentWindow)==null?void 0:h.postMessage(u,"*")};Ke(l({iframeRef:n},e));const c=Ve(o);return a("figure",{ref:r,id:O,className:"relative w-full h-full flex items-center justify-center select-none bg-black",children:[t("iframe",{referrerPolicy:"same-origin",id:"iframe-id",className:"w-full h-full",ref:n,src:"emulator.html",title:"Emulator"}),t(qe,l({},c))]})}function Qe(){return t("div",{className:"flex m-6 flex-grow",children:t(Je,{rom:"smw.sfc",core:"snes9x"})})}function Xe(){return t(Ae,{left:t(Ne,{}),top:t(De,{}),bottom:t(Se,{}),children:a(pe,{children:[t(p,{path:"/home",element:t(Qe,{})}),t(p,{path:"/games",element:t(Te,{})}),t(p,{path:"/consoles",element:t(Oe,{})}),t(p,{path:"*",element:t(ge,{to:"/home"})})]})})}const Ye=ve({palette:{mode:"dark",primary:{main:"#37B6FF"},secondary:{main:"#80cb2b"},info:{main:"#D9D9D8"},warning:{main:"#ffde5a"},success:{main:"#80cb2b"},error:{main:"#eb1d29"},text:{primary:"#D9D9D8"},background:{default:"#1e3c65",paper:"#1e1e1e"}}});xe.render(t(be.StrictMode,{children:t(ye,{basename:"retroid",children:t(ke,{theme:Ye,children:t(Xe,{})})})}),document.getElementById("root"));
